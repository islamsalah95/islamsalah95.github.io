<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Islam Salah</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0/css/bootstrap.min.css"
    />

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css" />
    <link rel="stylesheet" href="css/animate.css" />

    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />

    <link rel="stylesheet" href="css/aos.css" />

    <link rel="stylesheet" href="css/ionicons.min.css" />

    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/icomoon.css" />
    <link rel="stylesheet" href="css/style.css" />
    <style>
      #ava {
        width: 38%;
      }

      @media (min-width: 992px) {
        #iti {
          max-width: 65%;
        }
      }

      /* Add this CSS */
      @media (max-width: 767px) {
        .img-about.img {
          display: flex;
        }

        .img-about.img .img {
          background-position: center;
          background-size: cover;
          width: 100%;
          height: auto;
        }

        #avatar {
          height: 353px;
        }

        #ava {
          width: 101%;
          height: 606px;
        }
      }

      @media (max-width: 767px) {
        #avatar {
          height: 569px;
        }
      }

      @media (min-width: 518px) and (max-width: 771px) {
        #avatar {
          height: 646px;
        }
      }

      @media screen {
      }
      td,tr{
        color: antiquewhite;
      }
    </style>
  </head>

  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
   
    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-6">
          <div class="card" style="background-color: black;  text-align: center;">
            <div class="card-body">
              <form action="#" method="POST" id="loginForm">
                <div class="mb-3">
                  <label for="password" class="form-label">password</label>
                  <input type="password" class="form-control" id="password" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary">update</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container mt-5">
      <div class="row justify-content-center">
        <div class="col-md-12">
          <button id="clearButton">Clear Location Data</button>
        </div>
      </div>
    </div>



      <div class="container mt-5">
        <h2>IP Data Table</h2>
        <table class="table">
          <thead>
            <tr>
              <th>IP</th>
              <th>City</th>
              <th>Region</th>
              <th>Country</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>link</th>
              <th>page</th>
              <th>time</th>
            </tr>
          </thead>
          <tbody id="ipDataTableBody">
            <!-- Data will be dynamically added here -->
          </tbody>
        </table>
      </div>

    <footer class="ftco-footer ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">About</h2>
              <p>
                I'm a full-stack developer skilled in Laravel and Vue.js. My
                portfolio showcases the results of merging these technologies to
                create dynamic and engaging web applications.
              </p>
              <ul
                class="ftco-footer-social list-unstyled float-md-left float-lft mt-5"
              >
                <li class="ftco-animate">
                  <a href="#"><span class="icon-twitter"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="#"><span class="icon-facebook"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="#"><span class="icon-instagram"></span></a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-4">
              <h2 class="ftco-heading-2">Links</h2>
              <ul class="list-unstyled">
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Home</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>About</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Services</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Projects</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Contact</a
                  >
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Services</h2>
              <ul class="list-unstyled">
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Web
                    Design</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Web
                    Development</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Business
                    Strategy</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Data
                    Analysis</a
                  >
                </li>
                <li>
                  <a href="#"
                    ><span class="icon-long-arrow-right mr-2"></span>Graphic
                    Design</a
                  >
                </li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Have a Questions?</h2>
              <div class="block-23 mb-3">
                <ul>
                  <li>
                    <a href="#"
                      ><span class="icon icon-phone"></span
                      ><span class="text">+02 01272570173</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><span class="icon icon-envelope"></span
                      ><span class="text">islamm1995@gmail.com</span></a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
            <p>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved | This template is made with
              <i class="icon-heart color-danger" aria-hidden="true"></i> by
              <a href="https://colorlib.com" target="_blank">Colorlib</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
      <svg class="circular" width="48px" height="48px">
        <circle
          class="path-bg"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke="#eeeeee"
        />
        <circle
          class="path"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke-miterlimit="10"
          stroke="#F96D00"
        />
      </svg>
    </div>
    <script>
      window.onload = function () {
        if (!localStorage.getItem('password')) {
          window.location.href = "Login.html";
         }else{
          fetch(
        "https://profile-e58d5-default-rtdb.firebaseio.com/" +
          "password" +
          ".json",
        {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        }
      )
        .then((response) => response.json())
        .then((data) => {
          // console.log(data);
        if (data.password !==localStorage.getItem('password')) {
          window.location.href = "Login.html";
        }
        })
        .catch((error) => {
          console.error("Error:", error);
        });
         }   
        }  
      /////////////////////////
              document.getElementById('clearButton').addEventListener('click', function() {
            // URL of your Firebase Realtime Database
            const firebaseUrl = "https://profile-e58d5-default-rtdb.firebaseio.com/location.json";

            // Perform a DELETE request to clear all objects in location.json
            fetch(firebaseUrl, {
                method: "DELETE",
                headers: {
                    "Content-Type": "application/json",
                },
            })
                .then((response) => {
                    if (response.ok) {
                        console.log("Successfully cleared all objects in location.json");
                    } else {
                        console.error("Failed to clear objects:", response.status, response.statusText);
                    }
                })
                .catch((error) => {
                    console.error("Error:", error);
                });
        });

        //////////////////////
      fetch(
        "https://profile-e58d5-default-rtdb.firebaseio.com/" +
          "location" +
          ".json",
        {
          method: "GET",
          headers: {
            "Content-Type": "application/json",
          },
        }
      )
        .then((response) => response.json())
        .then((data) => {
          var newData = [];
          for (const id in data) {
            newData.push({
              ip: data[id].ip,
              city: data[id].city,
              region: data[id].region,
              country: data[id].country,
              latitude: data[id].latitude,
              longitude: data[id].longitude,
              link: data[id].link,
              page: data[id].page,
              time: data[id].time,
            });
          }
          console.log(newData);

          //////////////////////////////////
          // Your array of objects
          const dataArray = newData;
          // Function to populate the table
          function populateTable() {
            const tableBody = document.getElementById("ipDataTableBody");

            dataArray.forEach((item) => {
              const row = document.createElement("tr");
              row.innerHTML = `
            <td>${item.ip}</td>
            <td>${item.city}</td>
            <td>${item.region}</td>
            <td>${item.country}</td>
            <td>${item.latitude}</td>
            <td>${item.longitude}</td>
            <td><a href='${item.link}'>Location</a></td>
            <td>${item.page}</td>
            <td>${item.time}</td>

                `;
              tableBody.appendChild(row);
            });
          }

          // Call the function to populate the table
          populateTable();
          //////////////////////////////////
        })
        .catch((error) => {
          console.error("Error:", error);
        });
        /////////////////////
        document.getElementById('loginForm').addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent default form submission

    var password = document.getElementById('password').value;
    
    // Construct the data object to send to Firebase
    var data = {
        password: password
    };

    // Make a POST request to update data in Firebase
    fetch("https://profile-e58d5-default-rtdb.firebaseio.com/password.json", {
        method: "PATCH", // Use PATCH method to update existing data
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(data) // Convert data object to JSON string
    })
    .then((response) => response.json())
    .then((data) => {
        console.log("Data updated successfully:", data);
        // Redirect to Dash.html after successful update
        window.location.href = "Dash.html";
    })
    .catch((error) => {
        console.error("Error:", error);
    });
});

    </script>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/scrollax.min.js"></script>

    <script src="js/main.js"></script>
  </body>
</html>
